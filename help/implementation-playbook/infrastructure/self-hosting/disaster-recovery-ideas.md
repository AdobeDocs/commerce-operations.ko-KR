---
title: 자체 호스팅 Adobe Commerce 재해 복구
description: 고려해야 할 자체 호스팅 재해 복구 아이디어 및 개념과 모범 사례에 대해 알아봅니다.
landing-page-description: Adobe Commerce을 직접 호스팅할 때 고려해야 할 몇 가지 재해 복구 개념과 사항을 알아봅니다.
short-description: Adobe Commerce을 직접 호스팅하기 위한 전략과 재해 복구 개념을 알아봅니다.
kt: 11420
doc-type: tutorial
audience: all
last-substantial-update: 2023-04-13T00:00:00Z
source-git-commit: 6e361169889c8fe1c176d3a3283d52699dfa3b85
workflow-type: tm+mt
source-wordcount: '1771'
ht-degree: 0%

---


# 자체 호스팅 Adobe Commerce 재해 복구 아이디어

이 문서에 대한 재해 복구에는 실패한 배포가 포함됩니다. 전체 프로세스가 동일하지 않을 수 있지만 비슷한 원칙이 적용됩니다. 운영 배포의 실패, 서버가 응답하지 않고, 악용의 검색 및 기타 많은 시나리오가 발생했기 때문에 재해가 발생할 수 있습니다. 실패한 배포의 복구 프로세스에는 두 단계만 간단히 수행할 수 있는 경우, 성능상의 복구는 훨씬 더 어려울 수 있습니다. 환경, 호스팅 변형 및 기타 복잡성으로 인해 이 문서에서는 아이디어와 개념을 제공하지만 직접 조사를 계속 진행해야 합니다. 이러한 방식으로 비즈니스 요구 사항에 맞는 전략을 디자인할 수 있습니다.

## 자주 복구 프로세스 수행

연습, 연습, 연습. 재해 복구 목록에 작업이 먼저 나타나는 이유는 있습니다. 복구 계획을 설정하기는 쉽지만 실행하지는 않습니다. 제대로 연습하지 않으면 오류가 발생할 수 있고 단계가 누락되며 실제 복구가 더 오래 걸릴 수 있습니다. Dell과 비즈니스 파트너에게 Dell의 Practice 복구 지원 복구 프로세스를 연간 이벤트로 만드는 것도 좋지만 회사의 의사 결정권자와 심층적인 대화에는 몇 가지 주요 주제가 포함되어야 합니다. 이 주제들은 그들이 왜 연습이 중요한지 이해하는데 도움이 되고 기대되어야 하는지를 이해하는데 도움이 된다. 다음은 대화를 시작하는 데 도움이 되는 몇 가지 주제입니다.

* 실제 이벤트가 발생할 때 실제 가동 중지 시간을 줄입니다. 연습 실행 시 사이트를 1년에 1시간 동안 다운하는 경우 실제 이벤트의 실제 다운타임을 몇 시간 단위로 줄일 수 있습니다. 사이트를 복구하는 데 8시간 이상 걸리는 것은 일반적이지 않습니다. 이 이벤트를 연습하면 각 단계에서 걸리는 시간을 줄일 수 있고 더 빠르게 복구할 수 있습니다.
* 이러한 Practice 실행에 대한 예약된 다운타임은 서버 패치, 재고 조정 또는 정규 일정에 따라 수행해야 하는 기타 모든 작업 시간과 일치할 수 있습니다.
* 동일한 시나리오 대신 다른 시나리오를 수행합니다. 이전 날짜에서 전체 복구를 수행하려면 가끔 시간을 사용하십시오. 여기에는 데이터베이스의 보관된 복사본을 검색 및 사용하고 날짜와 일치하도록 코드를 롤백하는 등의 작업이 포함됩니다. 더 쉬운 것은 실패한 배포에서 복구일 수 있습니다. 이 경우 이전 커밋으로 롤백하면 됩니다.
* 복구 프로세스가 실제로 작동하는지, 아카이브된 데이터베이스가 손상될 수 있는지 확인합니다. 이렇게 하면 모든 것을 복구할 수 있고 기능할 수 있습니다. 이전 DB를 검색하고 복원하는 데 시간이 오래 걸립니다. 이 프로세스 부분이 얼마나 오래 걸릴 수 있는지 알고 있어야 합니다.
* 구성의 모든 변경 사항이 문서화되었는지 확인합니다. 이렇게 하면 이전 데이터베이스의 모든 복구가 새로운 구성 변경 사항을 적용할 수 있습니다. 예를 들어 지난 며칠 동안 API 키가 결제 처리자로 변경된 경우 좋은 변경 관리 프로세스를 통해 이러한 주요 업데이트를 찾으면 프로세스가 계획대로 진행됩니다.

## DB 백업

데이터베이스 백업은 꽤 정기적으로 수행되어야 합니다. 시간별, 일별, 주별 및 월별 스냅샷을 포함하는 것은 일반적입니다. 백업을 장기 스토리지로 이동해야 합니다. 비즈니스 또는 기술 팀이 충분한 시간이 지난 것으로 결정할 때마다 이러한 장기 스토리지는 신속한 복구가 더 이상 필요하지 않을 수 있습니다. 장기 스토리지에서 복구하면 복구 프로세스에 시간이 추가되므로 언제 이 문제가 발생할지 결정하는 데 주의해야 합니다. 데이터베이스 백업은 자동화가 되어야 하며 사람의 상호 작용에 의존하지 않아야 합니다. 이를 통해 안전하고 예측 가능한 복구 프로세스를 제공할 수 있습니다. 이것은 또한 만약 그러한 활동이 필요하다면, 가능하면서 믿을 수 있는 어떤 법의학 활동에도 도움을 준다. 탐정이 감지된 후 또는 신용 카드 사기 행위가 언제 발생했는지 또는 누군가 여러분의 웹 사이트에 접속했을 때에도 법의학적인 연구가 필요할 수도 있습니다. 이러한 백업을 사용하는 방법에는 제한이 없지만 실제로 필요한 경우 백업 캐비넷이 좋습니다.

다음은 데이터 보존 정책의 예입니다.

* 8시간마다 백업을 쉽게 액세스할 수 있어야 합니다.
* 지난 7일 동안 매일 백업하므로 쉽게 액세스할 수 있어야 합니다. 오프사이트 이동에 대한 후보일 수 있습니다.
* 지난 4주 동안 매주 백업을 수행하여 오프사이트 이동을 고려합니다.
* 지난 3개월 동안 월별 백업을 오프사이트로 이동했습니다.
* 이전 백업은 오프사이트 장기 스토리지로 이동됩니다.

## 인프라로서의 코드

이 방법론은 프로젝트에 필요한 부분이나 전체 인프라를 재구축할 수 있는 도구와 코드를 갖추고 있음을 의미합니다. 이는 서버에서 문제가 발생하여 사용하지 않아야 하는 경우에 필요할 수 있습니다. 새로운 서버를 신속하게 온라인 상태로 전환하고 코드를 배포하며 모든 PHP, Nginx 또는 Apache 구성을 만들 수 있으므로 다운타임이 자동으로 줄어듭니다. 실행 장부에 기록된 단계도 쉽게 설정되고 단계를 실행하는 데 훨씬 오래 걸립니다. 또한 응답하지 않는 사이트를 다시 온라인으로 전환하는 것이 스트레스를 받는 동안 발생할 수 있는 인간 오류를 고려하십시오.

## 보조 데이터베이스

보조 데이터베이스를 사용하는 것은 다음과 같은 몇 가지 이유로 유용합니다.

* 기본 드라이브 장애가 있는 경우 준비 대기
* 애플리케이션에서 준비 요청을 허용합니다.
* myqldump가 발생할 수 있도록 허용하여 데이터베이스를 잠그지 않고 정상적인 트랜잭션이 발생할 수 있도록 허용합니다
* 고객 요청에 정보를 처리하는 웹 사이트 기능을 줄이지 않고 외부 데이터 소스에서 데이터에 액세스할 수 있습니다.

보조 데이터베이스는 `warm standby`. 기본 데이터베이스 오류에서 복구하는 방법을 고려하고 있으면 이 작업이 실행될 수 있습니다. 보조 데이터베이스를 운영 데이터베이스로 승격하는 것은 데이터베이스를 새로 만든 Mysql 인스턴스로 다시 만들고 복원하는 것보다 복잡도가 낮습니다. 따라서 복구 작업 중 실제 다운타임이 줄어듭니다.

일부 요청을 보조 데이터베이스로 전환할 수 있는 기회가 있습니다. 이 방법을 사용하면 보조 데이터베이스를 읽기 전용으로 만드는 것이 좋습니다. Adobe Commerce 애플리케이션에서 읽기 작업에 이 보조 데이터베이스를 사용할 수 있도록 허용하면 일부 읽기 요청을 수행하고 보조 데이터베이스가 응답할 수 있습니다. 그러나 이 변경 사항은 모든 요청의 30~50%만 차지하지만 기본 데이터베이스에서 제거할 수 있는 모든 로드는 승리입니다.

## 롤백을 포함하는 배포 계획 생성

모든 배포에는 롤백 계획이 포함되어야 합니다. 예, 모든 배포. 만약 여러분이 그것을 계획한다면, 여러분은 결코 놀라지 않으며 나쁜 일에 준비가 될 것입니다. 경우에 따라 가장 간단한 코드 업데이트는 어떤 이유로든 치명적인 실패할 수 있습니다.

데이터베이스에서 스키마 변경을 실행하기 위해 작고 간단한 가져오기 요청을 커밋한 팀의 이 실제 사례를 고려하십시오. 1분에서 5분, 그리고 10분까지 배치되면서, 그 팀은 더 걱정되었습니다. 이 시점까지 확인 및 고려하지 않은 내용은 프로덕션 데이터베이스와 스테이징 데이터베이스에 비해 불일치가 발생했습니다. 일반적인 방법은 프로덕션 복사본으로 스테이징 환경을 새로 고칠 때 모든 고객 데이터를 제거하는 것입니다. 즉, 모든 테스트 및 QA가 이에 반영되기 전에 배포를 완료하는 데 단 몇 분이 소요됩니다. 실제로 2000만 명 이상의 고객이 있었고 이 작은 스키마 변화는 완료하는 데 매우 오랜 시간이 걸렸습니다. 이 작업이 실제로 얼마나 오래 걸리는지 알 수 없었기 때문에 mysql 프로세스를 종료하고 배포를 롤백해야 했습니다.

전체 프로세스가 유사하므로 배포를 위한 롤백 프로세스를 준비하는 데 단 몇 분 정도 걸립니다. 하지만 시간을 내어 Git 리포지토리의 HEAD을 다시 설정했을 대상을 정확히 문서화해야 합니다. 항상 같은 위치에 있는 경우 사용할 DB 스냅샷이나 현재 스냅샷을 찾을 위치를 정확하게 문서화해야 합니다. 배포 상태를 논의할 시간과 자동으로 적용되는 시기를 정의합니다. 예를 들어 배포가 15분 이상 걸리는 경우 프로젝트 관리자 및 다른 이해 관계자(계속 되어야 하는지)에게 문의하십시오. 하지만, 프로젝트에 대해 프로젝트 관리자 및 설계자가 망설이는 경우에도 프로세스가 45분 정도 걸리는 경우 롤백 프로세스를 자동으로 실행하고 모든 이해 당사자에게 알립니다.

여러 사람이 전체 프로세스와 모든 단계에 관련되어 있는지 확인합니다. 중간 수준 개발자가 배포 프로세스, 롤백 절차 및 파일 위치를 검토하도록 하는 것은 이러한 과정을 쉽게 수행할 수 있는 방법입니다. 결국 이러한 과정을 수행하여 전체 프로세스를 이해하도록 하는 것이 장기적인 성공에 중요한 요소입니다. 모든 사람이 배포를 취소할 수 있도록 권한을 부여해야 합니다. 여러분의 팀에게 이런 정도의 말을 하는 것은 힘을 주고 보람을 주는 것입니다. 만약 주니어 개발자가 정말로 어떤 것이 사라졌다고 느낀다면, 그들은 말할 수 밖에 없고 그들의 조심할 수 있도록 해야 한다고 느껴야 합니다. 설계자와 프로젝트 관리자가 그들의 두려움을 확인하거나 완화하도록 합니다. 따라서 EMC의 강력한 팀이 프로젝트를 면밀히 살펴보고 완벽한 구축 과정을 철저히 기록하는 것이 중요합니다.

## 도메인 이름 관리, DMS, SSL, WAF에 대한 액세스 확인

도메인 이름이 만료되므로 DNS 레코드를 실수로 수정할 수 있고 SSL 인증서가 만료될 수 있습니다. 로그인 및 연결이 자주 발생하는지 확인할 수 있습니다. 매 분기마다 이 간단한 검사를 하는 것은 여러분이 특히 긴급한 상황에서, 사물들이 어디에 있는지 정확히 알고 있다는 것을 확신하게 해줍니다. Amazon에서 DNS가 관리되고 있음을 확인하기 위해 등록기관에서 DNS를 관리한다고 가정하지 마십시오. 이 기록들은 자주 사용되지 않기 때문에 어디에 있는지 잊어버리는 것이 가능성이 높습니다. 사용자 이름 및 암호에 대한 서면 설명서를 신뢰하지 마십시오. 각 구성 요소에 로그인하고 찾고 있는 구성이 실제로 여기에서 관리되는지 확인합니다. 경영상의 이직이나 회사 인수 과정에서 상황이 너무 자주 바뀌며 어떤 일이 일어났는지 아는 사람은 단 한 명뿐이다. 그들이 업데이트를 한 사람이기 때문이다. 사용자가 공유 단어 문서에 의존해서 위치, 사용자 이름, 암호를 사용하는지 알지 못했습니다. 여러분과 조직에 적합한 확인 프로세스를 찾지만 3~6개월마다 수행하는 것이 좋은 시작점입니다.

{{$include /help/_includes/hosting-related-links.md}}
