---
title: 고급 설정
description: 대용량 데이터를 처리하도록 설계된 대규모 엔터프라이즈 시스템에 대한 모범 사례 및 권장 사항을 검토합니다.
source-git-commit: d263e412022a89255b7d33b267b696a8bb1bc8a2
workflow-type: tm+mt
source-wordcount: '1192'
ht-degree: 0%

---


# 고급 설정

[!DNL Commerce] 는 모든 규모의 고객을 위한 솔루션을 포함하는 유연하고 확장 가능한 제품입니다. 이 섹션에서는 구성에 대한 우수 사례 및 권장 사항을 다룹니다 [!DNL Commerce] 대량의 데이터, 과도한 로드 및 기타 엔터프라이즈 사례에 대해 작업해야 합니다.

## 인덱스 성능 조정

많은 양의 데이터를 처리할 때 재색인화가 문제가 될 수 있습니다. 다음 [!DNL Commerce] 팀은 가장 많이 로드된 인덱스와 활성화된 배치 인덱스화를 선택했으며, 이를 통해 각 반복에서 처리할 데이터의 일부를 설정할 수 있습니다. 이에 의해, 사용자는 데이터베이스의 데이터 유형과 크기에 따라 배치 크기를 조정할 수 있다.

이 설정을 관리하려면 `batchRowsCount` 의 매개 변수 `di.xml` 해당 모듈의 파일입니다. 다음 인덱스는 이 기능을 지원합니다.

* 카테고리 제품 색인(카탈로그 모듈)
* 가격 색인(카탈로그 모듈)
* EAV 색인(카탈로그 모듈)
* 재고 인덱스(CatalogInventory 모듈)

인덱스 일괄 처리 크기 변수를 조정하여 색인 성능을 조정할 수 있습니다. 인덱서에서 한 번에 처리되는 엔터티 수를 제어합니다. 어떤 경우에는 색인화 시간이 상당히 줄어든 것을 보았습니다.

예를 들어, B2B Medium과 유사한 프로필을 실행하는 경우 구성 값을 재정의할 수 있습니다 `batchRowsCount` in `app/code/Magento/catalog/etc/di.xml` 기본값을 `5000` to `1000`. 이렇게 하면 전체 인덱싱 시간이 4시간에서 2시간으로 단축되며 기본값으로 [!DNL MySQL] 구성.

>[!NOTE]
>
>카탈로그 규칙 인덱서에 일괄 처리를 사용할 수 없습니다. 카탈로그 규칙이 많은 판매업체는 이를 조정해야 합니다 [!DNL MySQL] 인덱싱 시간을 최적화하는 구성 이 경우 [!DNL MySQL] 구성 파일과 TMP_TABLE_SIZE 및 MAX_HEAP_TABLE_SIZE 구성 값(기본값은 둘 다 16M)에 더 많은 메모리를 할당하면 이 인덱서의 성능이 향상되지만, [!DNL MySQL] RAM을 더 많이 사용합니다.

### 웹 사이트별 고객 그룹 및 공유 카탈로그 제한

많은 수의 제품 SKU, 웹 사이트, 고객 그룹 또는 공유 카탈로그가 제품 가격 및 카탈로그 규칙 인덱서의 실행 시간에 영향을 줍니다. 모든 웹 사이트는 기본적으로 모든 고객 그룹(공유 카탈로그)에 할당되기 때문입니다.

인덱스 시간을 줄이려면 다음을 수행할 수 있습니다 [고객 그룹(공유 카탈로그)에서 특정 웹 사이트 제외](https://developer.adobe.com/commerce/php/development/components/indexing/optimization/#customer-group-limitations-by-websites).

## Redis 설정

한 개의 Redis 인스턴스가 수신 요청을 제공하기에 충분하지 않는 경우가 있습니다. 이러한 상황을 해결하기 위해 권장할 수 있는 몇 가지 해결 방법이 있습니다.

먼저, [!DNL Commerce] 각 캐시 유형에 대해 별도의 캐시 저장소를 구성할 수 있습니다. 이렇게 하면 Magento에 등록된 캐시 유형과 같은 수의 개별 Redis 인스턴스를 설치할 수 있습니다. 현실적으로 구성, 레이아웃 및 블록과 같이 가장 많이 사용되는 캐시에 대해 Redis 인스턴스를 원할 수 있습니다.

다른 해결 방법은 구성 캐시를 파일 시스템에 배치하고 다른 캐시를 Redis 서버로 이동하는 것입니다. 이 솔루션을 사용하면 모든 웹 노드에서 구성 캐시의 중앙 무효화를 위한 별도의 도구가 필요합니다.

자동으로 증가하는 수의 노드에서 병렬 읽기/쓰기 작업을 수행하는 Redis 클러스터를 사용할 수도 있습니다. [!DNL Commerce] 은 이 경우에 대한 구성을 제공하지 않지만 작은 사용자 지정으로 시작할 수 있습니다.

## 설정 [!DNL RabbitMQ]

Magento Open Source 및 Adobe [!DNL Commerce] 를 통해 구현된 메시지 큐 지원 [!DNL RabbitMQ]. [!DNL Commerce] 이 서비스를 사용하여 B2B 카탈로그 작업 및 비동기 스톡 업데이트를 비롯한 다양한 비동기 작업을 실행합니다. 작업 서버에 추가 작업을 추가하기 위한 모든 인터페이스는 제품과 함께 배포되며 타사 확장 범위에서 사용자 지정 비동기 논리 구현에 사용할 수 있습니다. 다른 통합과 마찬가지로 [!DNL Commerce] 에 대한 샘플 구성 파일 제공 [!DNL RabbitMQ] 에는 모든 권장 설정이 포함되어 있으며, 프로덕션 사용을 위한 모든 준비가 되어 있습니다.

## 데이터베이스 분할

>[!WARNING]
>
>데이터베이스 분할 기능은 [사용되지 않음](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) Adobe Commerce 버전 2.4.2에서 지원됩니다. 자세한 내용은 [분할 데이터베이스에서 단일 데이터베이스로 되돌리기](../configuration/storage/revert-split-database.md).

Adobe Commerce을 사용하면 성장하는 비즈니스 요구 사항을 충족하도록 확장 가능한 데이터베이스 저장소를 구성할 수 있습니다. 특정 도메인을 제공하는 세 개의 별도의 마스터 데이터베이스를 설정할 수 있습니다.

* 기본(카탈로그) 데이터베이스
* 체크 아웃 데이터베이스
* OMS(Order Management System) 데이터베이스

추가 데이터베이스를 구성하려면 빈 데이터베이스를 만들고 다음 명령 중 하나를 실행해야 합니다.

기본 DB의 경우

```bash
bin/magento setup:db-schema:split-quote
```

OMS 기본 DB용

```bash
bin/magento setup:db-schema:split-sales
```

이러한 명령은 특정 도메인 테이블을 기본 데이터베이스에서 도메인 데이터베이스로 마이그레이션합니다. 또한 [!DNL Commerce] 해당 연결 및 제한 처리를 허용하는 구성.

체크아웃과 Order Management에 대한 별도의 데이터베이스가 있으면 데이터베이스 서버 간에 로드를 배포할 수 있습니다. 카탈로그 및 기타 작업의 가용성에 영향을 주지 않고 더 많은 체크아웃 서비스를 제공하고 초당 더 많은 주문을 처리할 수 있습니다. 플래시 또는 활성 판매 기간에 대해 데이터베이스를 분할하거나, 기본적으로 고로드 프로젝트에 영구적으로 사용하는 것이 좋습니다. 데이터베이스 간 현재 데이터 마이그레이션은 시스템 관리자가 감독하여 실행해야 합니다.  프로덕션 모드에서 데이터베이스를 분할하지 마십시오.

마스터 데이터베이스 외에도 [!DNL Commerce] 여러 슬레이브 데이터베이스(시스템에 선언된 각 데이터 리소스에 대해 하나씩)를 구성할 수 있습니다. 슬레이브 데이터베이스는 주 데이터베이스 또는 도메인 마스터 데이터베이스 중 하나의 전체 복제본 역할을 합니다. 특정 리소스에 대한 읽기 작업에 대해 발급됩니다.

다음 명령을 실행하여 슬레이브 데이터베이스를 추가할 수 있습니다.

```bash
bin/magento setup:db-schema:add-slave
```

이 명령은 구성 변경을 수행하지만 복제 자체를 구성하지 않습니다. 수동으로 해야 합니다.

마스터 데이터베이스를 분할하고 슬레이브 데이터베이스를 설정한 후 [!DNL Commerce] 특정 데이터베이스에 대한 연결을 자동으로 제어하여 요청 유형(POST, PUT, GET 등)과 데이터 리소스를 기반으로 결정을 내릴 수 있습니다. If [!DNL Commerce] 또는 확장에서 GET 요청에 대해 쓰기 작업을 수행하면 시스템이 슬레이브에서 마스터 데이터베이스로 연결을 자동으로 전환합니다. 마스터 데이터베이스와 동일한 방식으로 작동합니다. 체크 아웃 관련 테이블로 작업하는 즉시 시스템에서 모든 쿼리를 특정 데이터베이스로 리디렉션합니다. 한편 모든 카탈로그 관련 쿼리는 기본 데이터베이스로 이동합니다.

다중 마스터/슬레이브 구성의 구성 및 이점에 대한 자세한 내용은
[데이터베이스 성능 솔루션 분할](../configuration/storage/multi-master.md).

## 미디어 콘텐츠 제공

Magento은 미디어 컨텐츠를 제공하고 전달하는 특정 통합을 제공하지 않습니다. 모든 일반적인 접근 방식은 Magento에서 함께 사용할 수 있습니다.

미디어 컨텐츠를 제공하는 가장 쉬운 방법은 컨텐츠를 [!DNL Varnish] server. 이 방법에서는 미디어 컨텐츠를 저장하는 공유 파일 시스템 또는 을 가리키는 전용 서버를 가정합니다 [!DNL Varnish].

미디어 및 고로드 환경의 경우 Apple, Akamai 등과 같은 CDN(Content Delivery Network) 서비스를 사용하는 것이 좋습니다. 이러한 서비스를 사용할 경우 [!DNL Commerce] 컨텐츠 업데이트에 클래식 가져오기 방법을 사용합니다. 다음을 구성해야 합니다 [!DNL Commerce] 해당 CDN 서비스와 작업할 URL. 미디어 컨텐츠를 CDN으로 이동하면 인스턴스의 로드가 크게 줄어듭니다.

## 로그 저장소 구성

로그 저장과 다른 디스크 작업에 미치는 영향은 웹 노드의 가용성에 영향을 줍니다(특히 로드가 많은 경우). 필요하지 않으면 로깅을 최소화하는 것이 좋습니다. 또한 액세스 속도가 빠른 별도의 스토리지 시스템에서 로깅하도록 로깅을 구성할 수 있습니다. 로그 저장소에 액세스하는 데 발생하는 모든 병목 현상은 로그 쓰기 또는 읽기 작업이 해당 흐름의 일부로 기록되는 수신 요청의 처리에 직접적으로 영향을 줄 수 있습니다.
