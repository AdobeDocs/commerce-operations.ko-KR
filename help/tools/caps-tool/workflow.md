---
title: ' [!DNL Cloud Automation Patching Service (CAPS)] 워크플로 작동 방식'
description: 용어, 워크플로 단계 및 자동화된 패치 관리를 위한 작업을 포함하여  [!DNL Cloud Automation Patching Service (CAPS)] 워크플로 프로세스에 대해 알아봅니다.
hide: true
hidefromtoc: true
source-git-commit: eff8c0ae9e1d9db6b46ba7cfbb915685ab5b194d
workflow-type: tm+mt
source-wordcount: '831'
ht-degree: 0%

---

# [!DNL Cloud Automation Patching Service (CAPS)] 워크플로의 작동 방식

이 항목에서는 [!DNL CAPS (Cloud Automation Patching Service)]을(를) 사용하여 패치 작업이 작동하는 방식에 대한 높은 수준의 개요를 제공합니다.

## Terminology

* **작업** - [!DNL CAPS]이(가) 수행하는 기본 작업:
   * 적용
   * 되돌리기
* **단계** - 워크플로의 세 단계:
   * 예비 검사
   * 패치 중
   * 유효성 검사
* **환경** - 패치가 적용되는 Adobe Commerce Cloud 환경입니다.

## 작업

[!DNL CAPS]은(는) Adobe Commerce 클라우드 환경에서 패치를 관리하기 위해 두 가지 기본 *작업*&#x200B;을 지원합니다.

* **적용 작업** - 안전하고 검증된 프로세스를 통해 코드 베이스에 패치 변경 사항을 추가합니다. 패치는 패치 파일을 &#39;m2-hotfixes&#39; 폴더에 배치하여 적용합니다.

* **되돌리기 작업** - &#39;m2-hotfixes&#39; 폴더에서 패치 파일을 제거하여 코드 베이스에서 이전에 적용된 패치를 제거합니다.

>[!IMPORTANT]
>
>원래 [!DNL CAPS]을(를) 통해 적용된 패치에만 되돌리기 작업을 사용할 수 있습니다. 수동으로 또는 다른 방법을 통해 적용된 패치는 이 서비스를 사용하여 되돌릴 수 없습니다.

## 단계

[!DNL CAPS] 워크플로에서는 패치가 안전하고 안정적으로 적용되도록 하기 위해 항상 이 순서로 실행되는 세 개의 *단계*&#x200B;를 사용합니다.

* **사전 확인** - 패치 호환성 및 환경 준비 상태를 확인합니다.
* **패치 중** - 통합 환경에서 패치를 적용하거나 되돌립니다.
* **유효성 검사** - 패치 응용 프로그램의 유효성을 검사하고 상태 검사를 수행합니다.

## 단계 세부 정보

### 1단계: 사전 확인

예비 확인 단계에서는 패치를 환경에 안전하게 적용할 수 있는지 확인합니다.

**결과:**

* **프로덕션 환경 보호**(프로덕션 환경만 해당):
   * 스토어가 유지 관리 모드인지 확인
   * cron 작업이 비활성화되었는지 확인
   * 조건이 충족되지 않을 경우 패치 작업 차단
   * 조건이 충족되는 경우 확인 대화 상자를 표시합니다.
* **패치 유효성 검사** - 패치 파일이 유효하고 호환되는지 확인합니다.
* **환경 평가** - 환경 준비 및 리소스를 확인합니다.
* **충돌 검색** - 기존 코드와의 잠재적인 충돌을 식별합니다.
* **종속성 확인** - Adobe Commerce 버전 호환성을 확인합니다.

### 2단계: 패치 작업

패치 작업 단계는 테스트를 위해 임시 통합 환경에서 패치를 적용하거나 되돌립니다. 이 단계에서 [!DNL CAPS]은(는) 실제 환경을 변경하기 전에 패치를 안전하게 적용하고 테스트하기 위한 임시 테스트 환경을 만듭니다.

이 접근 방식은 다음을 제공합니다.

* **안전** - 패치의 유효성을 검사할 때까지 대상 환경을 그대로 유지합니다.
* **테스트** - 실제 환경에서 프로덕션에 영향을 미치기 전에
* **롤백 기능** - 문제가 감지된 경우
* **격리** - 각 패치 작업에 대해

#### 2a 단계: 통합 환경 생성

**분기 만들기** - [!DNL CAPS]에서 이름이 `{target-environment}-CAPS-{patch-id}`인 임시 통합 환경 분기를 만듭니다.

**환경 설정** - 통합 환경이 대상 환경의 하위 환경으로 만들어집니다.

**코드 동기화** - 통합 환경은 대상 환경의 정확한 상태를 상속합니다.

**리소스 요구 사항** - [!DNL CAPS]은(는) 대상 환경의 코드베이스를 사용하여 임시 환경을 만듭니다. Adobe Commerce Cloud 설명서에 따르면 각 환경(통합 환경 포함)에는 계약된 스토리지 계획에 따라 별도의 스토리지 할당이 있습니다. 계약한 스토리지 양은 각 환경의 전체 스토리지를 나타냅니다. 대부분의 경우 리소스 제한과 관련된 문제는 발생하지 않습니다. 리소스 제한 사항에 오류가 발생하는 경우 플랜에서 애플리케이션 크기와 계약된 스토리지를 확인하십시오.

#### 2b 단계: 통합 환경에서 애플리케이션 패치 적용

**안전 테스트** - 패치가 대상 환경에 직접 적용되지 않고 통합 환경에 적용됩니다.

**파일 관리** - 패치 파일이 `m2-hotfixes/` 디렉터리에 있습니다.

**Git 작업** - 변경 내용이 커밋되고 통합 환경 분기에 푸시됨

**환경 활성화** - 통합 환경이 활성화된 후 패치된 코드를 배포합니다.

#### 2c 단계: 대상 환경으로 다시 병합

**환경 체크 아웃** - [!DNL CAPS]에서 대상 환경을 로컬로 체크 아웃합니다.

**병합 작업** - 통합 환경 분기가 대상 환경에 병합됩니다.

**충돌 해결** - 충돌이 발생하면 가능한 경우 자동으로 해결됩니다.

**배포** - 병합된 변경 내용이 대상 환경에 배포됩니다.

**확인** - [!DNL CAPS]은(는) 병합이 성공했으며 환경이 동기화 상태인지 확인합니다

**환경 정리** - 임시 통합 환경을 삭제하여 리소스를 확보합니다.

## 통합 환경 라이프사이클

통합 환경에는 패치 단계 동안 다음과 같은 특정 라이프사이클이 있습니다.

* **만들기** - 패치 단계 시작 시 생성됨
* **활성 기간** - 패치 적용 및 테스트 동안 활성 상태 유지
* **정리** - 병합 성공 후 또는 작업이 실패한 경우 자동으로 삭제됨

### 3단계: 유효성 검사

유효성 검사 단계에서는 패치된 응용 프로그램이 올바르게 작동하고 상태 검사를 수행합니다.

**결과:**

* **응용 프로그램 상태 검사** - 응용 프로그램이 시작되고 제대로 실행되는지 확인합니다.
* **정리** - 임시 환경을 제거하고, 로그를 업데이트하고, 완료 알림

## 성공 지표

**적용 작업:**

* &quot;작업이 완료되었습니다.&quot; - 문제 없이 적용된 패치
* &quot;Patch가 적용되었습니다.&quot; - 패치가 이미 있습니다(작업이 필요 없음).
* 패치 파일이 &#39;m2-hotfixes&#39; 폴더에 배치되었습니다.
* 모든 유효성 검사 통과
* 애플리케이션 상태 검사 성공

**되돌리기 작업:**

* &quot;작업이 완료되었습니다.&quot; - 문제 없이 패치가 되돌려졌습니다.
* &quot;Patch가 복구되었습니다.&quot; - 패치가 이미 복구되었습니다(조치 필요 없음).
* 패치 파일이 &#39;m2-hotfixes&#39; 폴더에서 정상적으로 제거됨
* 모든 유효성 검사 통과
* 애플리케이션 상태 검사 성공

## 프로덕션 환경 보호

[!DNL CAPS]에는 우발적인 중단을 방지하고 패치가 사전에 안전하게 검증되도록 하는 프로덕션 환경에 대한 특정 보호 장치가 포함되어 있습니다.

### 프로덕션 패치에 대한 사전 조건

프로덕션 환경에 패치를 적용하기 전에 [!DNL CAPS]에서 두 가지 중요 조건을 확인합니다.

* **유지 관리 모드** - 저장소는 유지 관리 모드여야 합니다.
* **크론 작업이 비활성화됨** - 크론 작업이 비활성화되어 있어야 함

두 조건 중 하나가 충족되지 않으면 패치 응용 프로그램이 차단되고 사용자에게 알림이 표시됩니다.

## 관련 항목

* [CAPS 소개](intro.md)
* [액세스 방법](access.md)
* [우수 사례](best-practices.md)
* [문제 해결](troubleshooting.md)
